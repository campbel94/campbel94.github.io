<!DOCTYPE html>
<head>
  <title>ATS Demo</title>

  <!-- Google Tag Manager -->
  <!-- <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];w[l].push({
        'gtm.start': new Date().getTime(),
        event:'gtm.js'
      });
      var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),
      dl=l!='dataLayer'?'&l='+l:'';
      j.async=true;
      j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-K6JLTGVT');
  </script> -->
  <!-- End Google Tag Manager -->

  <!-- <script async defer src="https://launchpad-wrapper.privacymanager.io/c59d016a-b3ff-4e33-a2d8-3e05a076195e/launchpad-liveramp.js"></script> -->
  <link rel="icon" href="./assets/lr_logo.png">
  <script src="https://cdn.jsdelivr.net/npm/jshashes@1.0.8/hashes.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script defer src="script.js"></script>
  <script defer src="https://ats-wrapper.privacymanager.io/ats-modules/9e2e0c95-6ba0-41f6-b02f-278baaec9be0/ats.js"></script>
  
  <style>
    body{
      font-family: helvetica, sans-serif;
      background-color: #0A6D41;
      margin: 0 auto;
      max-width: 1000px;
    }
    header{
      text-align: center;
      color: white;
    }
    
    div {
      background-color: rgba(255,255,255, 0.75);
      fill-opacity: .5;
      border-radius: 5px;
      /* max-width: 80%; */
      margin: 20px 0 20px 0;
      padding: 20px;
      /* padding-top: 20px;
      padding-bottom: 20px; */
    }

    span {
      word-wrap: break-word;
    }

    h3 {
      text-align: center;
      text-decoration: underline;
    }

    #emailInputDiv {
      margin: 0 0 20px 0;
    }
    /* #test-form-id{
      background-color: white;
      width: 300px;
    } */
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K6JLTGVT" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
  <!-- End Google Tag Manager (noscript) -->

  <!-- <img src=""> -->
  
  <header>
    <h1>ATS Demo Site</h1>
    <p>This site demonstrates how the ATS tag generates a RampID envelope from emails and phone numbers collected on site.</p>
  </header>

  <div id="emailInputDiv">
    <h3 id="emailInputDiv">Email Input</h3>
    <input type="email" id="email-input" placeholder="Your Email" type="email" size="35">
    <button type="button" id="submit-button">Submit</button>
    <p><b>Email input is: </b><span id="identifierSpan"></span></p>
  </div> 

  <div>
    <h3>API Request Parameters</h3>
    <!-- <button id="hashing-button">Hash Identifier</button> -->
    <p><b>SHA256 Email Hash: </b><span id="sha256Span"></span></p>
    <p><b>SHA1 Email Hash: </b><span id="sha1Span"></span></p>
    <p><b>MD5 Email Hash: </b><span id="md5Span"></span></p>
    <p><b>ATS Placement ID: </b><span id="pidSpan"></span></p>

    <!-- <h3>User Location</h3> -->
    <!-- <button id="geo-button">Geo Locator</button> -->
    <!-- <p><b>Country: </b><span id="countrySpan"></span></p> -->
    <!-- <p><b>Region: </b><span id="regionSpan"></span></p> -->

    <!-- <h3>Domain</h3> -->
    <!-- <button id="domain-button">Root Domain</button> -->
    <!-- <p><span id="domainSpan"></span></p> -->

    <h3>Envelope Request URL</h3>
    <!-- <button id="envelopeRequest-button">Envelope Request URL</button> -->
    <div><p><span id="envelopeRequestSpan"></span></p></div>

    <h3>Envelope Response</h3>
    <!-- <button id="envelopeResponse-button">Envelope Response</button> -->
    <div><p><span id="envelopeResponseSpan"></span></p></div>
  </div>

  <div>
    <h3>Request Headers</h3>
    <!-- <button id="geo-button">Geo Locator</button> -->
    <p><b>User Country: </b><span id="countrySpan"></span></p>
    <p><b>User Region: </b><span id="regionSpan"></span></p>

    <p><b>Domain: </b><span id="domainSpan"></span></p>
    <!-- <button id="domain-button">Root Domain</button> -->
  </div>

  <div>
    <h3>Clicking one of the two buttons below will generate and store a RampID envelope on the browser, either by pulling the email from the page <a href="https://docs.liveramp.com/privacy-manager/en/configure-how-identifiers-are-obtained.html#configure-ats-with-detect-mode"  target="_blank">(Detect Mode)</a> or passing the it through the <code>ats.setAdditionalData()</code> method <a href="https://docs.liveramp.com/privacy-manager/en/configure-how-identifiers-are-obtained.html#how-to-configure-direct-mode"  target="_blank">(Direct Mode)</a>.</h3>
    <button id="detectButton">Detect Email</button>
    <button id="directButton">Direct Pass Email</button>
    <p><b>Response:</b></p>
    <div><p><span id="atsResponseSpan"></span></p></div>
    <p><b>Base64 Encoded Response:</b></p>
    <div><p><span id="atsEncodedResponseSpan"></span></p></div>
    <button id="invalidateEnvelopeButton">Remove Envelope</button>
  </div>

</body>